#!/bin/bash

#trap "echo '\\n'All the users were created successfully." EXIT
echo `readlink $0`

#Only consider the first paramater if many are given -- $1
if [ -n "$1" ] && [ -f "$1" ]; then
	userAccounts="$1"
else
	userAccounts=`mktemp -t omegaServer.users.XXXXXX`
	echo "Temporary data will be stored in "$userAccounts
	. getUserInfo #Loads getUInfo function

	while echo;do
		getUInfo $userAccounts

		while echo; do
			read -n1 -p "Do you want to add more? [Y/n]: " eoc; echo
			case $eoc in
				y|Y) break;;
				n|N) break 2;;
			esac
			done
	done
fi

cat  $userAccounts | while read aNum branch citizen age legacy; do
	echo "$aNum $citizen $age $legacy"
done
